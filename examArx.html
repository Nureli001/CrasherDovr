<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crasher Online Sınaq Sistemi</title>
    <style>
        body { font-family: sans-serif; background-color: #f4f4f9; padding: 20px; line-height: 1.6; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; }
        #timer { position: sticky; top: 10px; background: #e74c3c; color: white; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold; z-index: 100; }
        .question-block { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; transition: 0.3s; }
        .option { display: block; margin: 8px 0; cursor: pointer; padding: 8px; border-radius: 4px; border: 1px solid #eee; }
        .option:hover { background: #f9f9f9; }
        .correct-ans { border-left: 5px solid #2ecc71; background: #eafaf1; }
        .wrong-ans { border-left: 5px solid #e74c3c; background: #fdf2f2; }
        .skipped-ans { border-left: 5px solid #f1c40f; background: #fef9e7; }
        button { display: block; width: 100%; padding: 12px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 20px; }
        button:hover { background: #2980b9; }
        #result { margin-top: 30px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Crasher Dövrələr Nəzəriyyəsi Sınağı</h2>
    <div id="timer">Qalan Vaxt: 30:00</div>
    <div id="questions-container">Yüklənir...</div>
    <button id="submit-btn" onclick="finishExam()">İmtahanı Bitir</button>
    <div id="result"></div>
</div>

<script>
    let questions = [];
    let startScore = 50;
    let timeLeft = 1800; // 30 dəqiqə

    // Timer funksiyası
    const timerInterval = setInterval(() => {
        let minutes = Math.floor(timeLeft / 60);
        let seconds = timeLeft % 60;
        document.getElementById("timer").innerHTML = `Qalan Vaxt: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            finishExam();
        }
        timeLeft--;
    }, 1000);

    // JSON-dan sualları çəkmək
    fetch('QuestionsDvr.json')
        .then(res => {
            if (!res.ok) throw new Error("Fayl tapılmadı");
            return res.json();
        })
        .then(data => {
            questions = data; // Düzəldildi: questions = data
            displayQuestions();
        })
        .catch(err => {
            document.getElementById('questions-container').innerHTML = "Xəta: Məlumat yüklənmədi. JSON faylını yoxlayın.";
            console.error(err);
        });

    function displayQuestions() {
        const container = document.getElementById("questions-container");
        container.innerHTML = "";
        questions.forEach((q, i) => {
            let optionsHTML = "";
            for (let opt in q.options) {
                optionsHTML += `
                    <label class="option">
                        <input type="radio" name="q${i}" value="${opt}"> ${opt}) ${q.options[opt]}
                    </label>
                `;
            }
            // Boş buraxma variantı
            optionsHTML += `
                <label class="option" style="color: #999;">
                    <input type="radio" name="q${i}" value="BOS"> Boş burax
                </label>
            `;

            container.innerHTML += `
                <div class="question-block" id="block${i}">
                    <p><strong>Sual ${i + 1}:</strong> ${q.q}</p>
                    ${optionsHTML}
                    <div id="feedback${i}"></div>
                </div>
            `;
        });
    }

    function finishExam() {
        clearInterval(timerInterval);
        let correctCount = 0;
        let wrongCount = 0;

        questions.forEach((q, i) => {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            const block = document.getElementById(`block${i}`);
            const feedback = document.getElementById(`feedback${i}`);

            if (selected) {
                if (selected.value === q.correct) {
                    correctCount++;
                    block.classList.add("correct-ans");
                    feedback.innerHTML = "<b>✅ Doğru (+2 bal)</b>";
                } else if (selected.value === "BOS") {
                    block.classList.add("skipped-ans");
                    feedback.innerHTML = `<b>⚪ Boş buraxıldı.</b> Düzgün: ${q.correct}`;
                } else {
                    wrongCount++;
                    block.classList.add("wrong-ans");
                    feedback.innerHTML = `<b>❌ Səhv! (-1 bal).</b> Düzgün: ${q.correct}`;
                }
            } else {
                block.classList.add("skipped-ans");
                feedback.innerHTML = `<b>⚪ Cavabsız.</b> Düzgün: ${q.correct}`;
            }
        });

        let examScore = (correctCount * 2) - (wrongCount * 1);
        let total = startScore + examScore;
        
        document.getElementById("result").innerHTML = `
            <div style="background:#2c3e50; color:white; padding:20px; border-radius:10px; text-align:center;">
                <h2>Nəticə</h2>
                <p>Doğru: ${correctCount} | Səhv: ${wrongCount}</p>
                <p>Sınaq Balı: ${examScore}</p>
                <h3 style="color:#f1c40f;">Ümumi Bal: ${total}</h3>
                <button onclick="location.reload()" style="background:#e67e22;">Yenidən Başla</button>
            </div>
        `;
        document.getElementById("submit-btn").style.display = "none";
        window.scrollTo(0, document.body.scrollHeight);
    }
</script>

</body>
</html>















