<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crasher Online Sınaq Sistemi</title>

<style>
body { font-family: sans-serif; background-color: #f4f4f9; padding: 20px; }
.container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
#timer { background:#e74c3c; color:white; padding:10px; text-align:center; border-radius:5px; font-weight:bold; }
.question-block { border:1px solid #ddd; padding:15px; margin:15px 0; border-radius:8px; }
.option { display:block; margin:8px 0; cursor:pointer; }
.correct-ans { background:#d4edda; }
.wrong-ans { background:#f8d7da; }
.skipped-ans { background:#fff3cd; }
button { width:100%; padding:15px; font-size:18px; background:#2ecc71; color:white; border:none; border-radius:8px; cursor:pointer; }
</style>
</head>

<body>
<div class="container">
<h2>Online Sınaq İmtahanı</h2>
<div id="timer">Yüklənir...</div>
<div id="quiz"></div>
<button id="finishBtn" onclick="finish()">İmtahanı Bitir</button>
<div id="result"></div>
</div>

<script>
let TIME = 30 * 60;
let interval;
let startScore = 0;
let currentQuestions = [];
// Fayl adını bura uyğunlaşdırdım
const QUESTIONS_URL = "QuestionsDvr.json"; 

function shuffle(arr) {
    return arr.sort(() => Math.random() - 0.5);
}

async function start() {
    const val = prompt("İmtahana giriş balın neçədir? (0–50)");
    startScore = parseInt(val) || 0;

    try {
        const res = await fetch(QUESTIONS_URL);
        let allQuestions = await res.json();

        currentQuestions = shuffle(allQuestions).slice(0, 25);

        const quizDiv = document.getElementById("quiz");
        quizDiv.innerHTML = "";

        currentQuestions.forEach((q, i) => {
            let optionsHtml = "";

            // JSON-dakı obyekt variantlarını (A, B, C, D) dövrə salırıq
            for (let key in q.options) {
                optionsHtml += `
                <label class="option">
                    <input type="radio" name="q${i}" value="${key}"> ${key}) ${q.options[key]}
                </label>`;
            }

            optionsHtml += `
            <label class="option">
                <input type="radio" name="q${i}" value="BOS"> <b>Boşluq</b>
            </label>`;

            quizDiv.innerHTML += `
            <div id="block${i}" class="question-block">
                <p><b>${i + 1}. ${q.q}</b></p> 
                ${optionsHtml}
                <div id="feedback${i}"></div>
            </div>`;
        });

        interval = setInterval(updateTimer, 1000);

    } catch (e) {
        document.getElementById("quiz").innerHTML = "❌ JSON oxunmadı. Fayl adının QuestionsDvr.json olduğundan əmin olun.";
        console.error(e);
    }
}

function updateTimer() {
    if (TIME <= 0) { finish(); return; }
    TIME--;
    let m = Math.floor(TIME / 60);
    let s = TIME % 60;
    document.getElementById("timer").innerText = `Qalan vaxt: ${m}:${s<10?'0'+s:s}`;
}

function finish() {
    clearInterval(interval);
    document.getElementById("finishBtn").style.display = "none";

    let correct = 0, wrong = 0;

    currentQuestions.forEach((q, i) => {
        const sel = document.querySelector(`input[name="q${i}"]:checked`);
        const block = document.getElementById(`block${i}`);
        const fb = document.getElementById(`feedback${i}`);

        if (!sel || sel.value === "BOS") {
            block.classList.add("skipped-ans");
            fb.innerHTML = `⚪ Boş | Düzgün: ${q.correct}`;
        } else if (sel.value === q.correct) { // Hərfləri birbaşa müqayisə edirik
            correct++;
            block.classList.add("correct-ans");
            fb.innerHTML = "✅ Doğru (+2)";
        } else {
            wrong++;
            block.classList.add("wrong-ans");
            fb.innerHTML = `❌ Səhv (-1) | Düzgün: ${q.correct}`;
        }
    });

    const score = correct * 2 - wrong;
    document.getElementById("result").innerHTML = `
    <h3>Nəticə</h3>
    Doğru: ${correct}<br>
    Səhv: ${wrong}<br>
    Sınaq Balı: ${score}<br>
    <b>Yekun Bal: ${score + startScore}</b>`;
}

start();
</script>
</body>
</html>


















